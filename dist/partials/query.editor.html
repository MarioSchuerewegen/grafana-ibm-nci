<query-editor-row query-ctrl="ctrl">
  <div class="gf-form-inline">
    <div class="gf-form">
      <label class="gf-form-label query-keyword width-9">Datasource:</label>
      <metric-segment-model custom="false"
      						css-class="width-15"
                            get-options="ctrl.DataSources()"
                            placeholder="Select Datasource..."
                            property="ctrl.target.DataSource"></metric-segment-model>
    </div>
    <div class="gf-form">
      <label class="gf-form-label query-keyword width-10">Dataset:</label>
      <metric-segment-model custom="false"
            				css-class="width-9"
                            get-options="ctrl.DataTypes()"
                            on-change="ctrl.onChangeDataType()"
                            placeholder="Select Dataset..."
                            property="ctrl.target.DataType"></metric-segment-model>
    </div>
    <div class="gf-form">
      <label class="gf-form-label query-keyword width-9">Metric Field:</label>
      <metric-segment-model custom="false"
            				css-class="width-9"
                            get-options="ctrl.Fields()"
                            on-change="ctrl.onChangeFields()"
                            placeholder="Select Metric field..."
                            property="ctrl.target.Field"></metric-segment-model>
    </div>
    <div class="gf-form"
         ng-init="ctrl.onChangeFields()"
         ng-show="ctrl.showPrimaryKey">
      <label class="gf-form-label query-keyword width-7">Group by:</label>
      <metric-segment-model custom="false"
            				css-class="width-9"
                            get-options="ctrl.PrimaryKey()"
                            on-change="ctrl.onChangeInternal()"
                            property="ctrl.target.PrimaryKey"></metric-segment-model>
    </div>
  </div>
  <div class="gf-form-inline">
   <div class="gf-form">
   <label class="gf-form-label query-keyword width-9">Policy Parameters:</label>
    <div class="gf-form" ng-repeat="segment in ctrl.colSegments">
   		<metric-segment segment="segment" get-options="ctrl.onChangeParameters()" on-change="ctrl.tagSegmentUpdated(segment, $index)" css-class="width-9"></metric-segment>
    </div>
    </div>
  </div>
  <div class="gf-form-inline">
    <div class="gf-form gf-form--grow">
      <label class="gf-form-label query-keyword width-9">Condition:</label>
      <tip>PARAM='value' as accepted by you Impact policy  e.g MONITOR='PAR'   <br> single quotes required</tip>
      <input class="gf-form-input"
             ng-blur="ctrl.refresh()"
             ng-model="ctrl.target.Condition"
             placeholder="Filter condition (optional)"
             spellcheck='false'
             type="text"></input>
    </div>
    <div class="gf-form gf-form--grow">
      <label class="gf-form-label query-keyword width-5">Alias:</label>
      <input class="gf-form-input"
             ng-blur="ctrl.refresh()"
             ng-model="ctrl.target.alias"
             placeholder="Metric naming pattern (optional)"
             spellcheck="false"
             type="text"></input>
    </div>
  </div>
  <div class="gf-form-inline">
    <div class="gf-form">
      <label class="gf-form-label query-keyword width-9">Time Attribute:</label>
      <span class="gf-form-select-wrapper">
        <select class="gf-form-input gf-size-auto"
          		get-options="ctrl.TimeFields()"
               // on-change="ctrl.getTimeFields()"
                ng-model="ctrl.target.timeAttribute"
                //ng-options="v.value as v.name for v in ctrl.timeAttributes"></select>
      </span>
    </div>
    <div class="gf-form">
      <label class="gf-form-label query-keyword width-9">Value Attribute:</label>
      <span class="gf-form-select-wrapper">
        <select class="gf-form-input gf-size-auto"
                ng-model="ctrl.target.valueAttribute"
                ng-options="v.value as v.name for v in ctrl.valueAttributes"></select>
      </span>
    </div>
    <div class="gf-form">
      <label class="gf-form-label query-keyword width-10">Time Range: 
      <tip>'Current value' setting ignores global time range filter and shows only last sampled value. Useful for attributes not enabled for historical collection.</tip></label>
      <span class="gf-form-select-wrapper">
        <select class="gf-form-input gf-size-auto"
                ng-model="ctrl.target.timeRangeAttribute"
                ng-options="v.value as v.name for v in ctrl.timeRangeAttributes"></select>
      </span>
    </div>
  </div>
</query-editor-row>
